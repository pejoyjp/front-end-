<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            #result{
                width: 200px;
                height: 100px;
                border: solid 1px blue;
            }
        </style>
    </head>
    <body>
        <div id="result">

        </div>
        <script>
            const result = document.getElementById('result')
            window.onkeydown =()=>{
                const xhr = new XMLHttpRequest()
                //设置响应体数据的类型
                xhr.responseType = 'json'
                xhr.open('GET','http://127.0.0.1:8000/json-server')
                xhr.send()
                xhr.onreadystatechange = ()=>{

                    if(xhr.readyState === 4){
                        if(xhr.status>=200 && xhr.status<300){
                        /*
                        console.log(xhr.response)
                        result.innerHTML = xhr.response
                        */

                       /*
                       手动转换
                       let data = JSON.parse(xhr.response)
                       console.log(data)
                       result.innerHTML = data.firstname
                       
                       */
                       //自动转换
                       //需要在上面写 xhr.responseType = 'json'
                       console.log(xhr.response)
                       result.innerHTML = xhr.response.name
                    }
                    
                    }
                    
                }
            }
        </script>
    
    </body>
</html>